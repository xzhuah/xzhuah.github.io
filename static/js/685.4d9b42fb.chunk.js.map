{"version":3,"file":"static/js/685.4d9b42fb.chunk.js","mappings":"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","sources":["component/button/CopyButton.tsx","../node_modules/@mui/icons-material/esm/DeleteForever.js","../node_modules/@mui/icons-material/esm/Help.js","domain/nodeTreeStore/component/EngineChip.tsx","domain/nodeTreeStore/component/TypeChip.tsx","domain/nodeTreeStore/component/BlenderChip.tsx","domain/nodeTreeStore/NodeTreeItemWidget.tsx","../node_modules/@mui/icons-material/esm/ContentCopy.js","../node_modules/@mui/icons-material/esm/Edit.js"],"sourcesContent":["import {IconButton, IconButtonProps} from \"@mui/material\";\r\nimport ContentCopyIcon from \"@mui/icons-material/ContentCopy\";\r\nimport copy from 'copy-to-clipboard';\r\nimport React from \"react\";\r\n// CopyButton 是一个便捷实用按钮组件，它可以复制文本到剪贴板。\r\ntype CopyButtonProps = {\r\n  text: string | (() => string);\r\n  icon?: React.ReactNode;\r\n} & IconButtonProps;\r\n\r\n// https://stackoverflow.com/questions/57868405/safari-clipboard-error-typeerror-undefined-is-not-an-object\r\nconst CopyButton = ({text, icon = <ContentCopyIcon/>, ...rest}: CopyButtonProps) => {\r\n  return <IconButton onClick={() => {\r\n    return copy(text instanceof Function ? text() : text);\r\n  }} {...rest}>{icon}</IconButton>\r\n}\r\n\r\nexport default React.memo(CopyButton);","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteForever');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25\"\n}), 'Help');","// @flow\r\nimport * as React from 'react';\r\nimport {Chip, ChipProps} from \"@mui/material\";\r\nimport {getEngineColor, getEngineLabel} from \"../NodeTreeStoreUtil\";\r\n\r\ntype EngineChipProps = {\r\n  engine: string;\r\n} & ChipProps;\r\nexport const EngineChip = ({engine, sx, ...rest}: EngineChipProps) => {\r\n  return (\r\n      <Chip label={getEngineLabel(engine)}\r\n            sx = {{\r\n              backgroundColor: getEngineColor(engine),\r\n              color: \"white\",\r\n              ...sx}}\r\n            {...rest}\r\n      />\r\n  );\r\n};","// @flow\r\nimport * as React from 'react';\r\nimport {Chip, ChipProps} from \"@mui/material\";\r\nimport {getTypeColor, typeToLabel} from \"../NodeTreeStoreUtil\";\r\n\r\n\r\ntype TypeChipProps = {\r\n  type: string;\r\n} & ChipProps;\r\nexport const TypeChip = ({type, sx, ...rest}: TypeChipProps) => {\r\n  return (\r\n      <Chip label={typeToLabel(type)}\r\n            sx = {{\r\n              backgroundColor: getTypeColor(type),\r\n              color: \"white\",\r\n              ...sx}}\r\n            {...rest}\r\n      />\r\n  );\r\n};","// @flow\r\nimport * as React from 'react';\r\nimport {Chip, ChipProps} from \"@mui/material\";\r\n\r\ntype BlenderChipProps = {\r\n  version: string;\r\n} & ChipProps;\r\nexport const BlenderChip = ({version, sx, ...rest}: BlenderChipProps) => {\r\n  return (\r\n      <Chip label={version}\r\n            avatar={<img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsSAAALEgHS3X78AAAC0ElEQVR4nOyWX0hTURzHNSEpKqUeCh+KXlYZ0p+XoqCHniLClwJjkeFDjxH1lpDlimKmMiT6Q2TW0nJrrISg1ZjlkP7YH6dRbiFl5Zqrbe7/n7b763fP7sbxdDe9biwCf/DhXu45fL/fc+45596iorn6n8txcnExshmp+FcBbiGAcIgSKSl0gNtCgBS9yPJCBliA3GFCjCPbCxZCCFIvvIZUiN/IsUKHqEZ8zGxokEWzEVuIdCKTSFwCHBOA5yNSKTXACRGhXAgg+6UE2IZ8ynMInnqpM1GCzBPgD50yRM8KOy+sAb9RAeEhLcS+viJX/5NGcDbJ2ACcpJlgwlQhtimCp8ohYDoHXCwEYsU/92O7o6GMDhFGtko1P4gE2ZEHzCpilOA4uNdrgVpFF+w8cplctaZBiCc40h7oa2Vnon+mxqXIFbH36emsSY4SPY63PQBZzfm/OKrSk3a+POp9rMba6cxXIQOZFlR4WEeEjQM2UfMUhpcjpF/YomE1mrOZ70JcGVdzwxLgwl4irGh/nDXA6euG5GsKulgdq5gxv9obkQTT2cNuy4R3nAi3ac1ZA6i6+0i/uGeMDWBnzZchj0RGPILIkIf08+iXfiJs+/YT1h9oEjWvlCvBOuYk/aKjT1ndUdp8KfJZxJwPVC70aaHbJjV16e3WY34PGw+1TDHfUNsM+mfD6T6eLjmrraMDdIiYtzqoHwy838Gug4jVkDb44fJBt/EdKNUmuItX+y9vui3yoUdsLcnpAPephihSl2Fx6miRibMVEHp9Q/QQSlXwxVWYOLOCNX+OFNPCmwTxS0hVlt2xGomwo3F3VEPozU2I2QeBi/gg9v0tCeZu3y02cv443pJxC05XjuTPRy4fpIuzNqdC7EXcEo35o/xwzuZUiJWIeYbmFmRd3sypEPzneg9yzZH8UvoFwxC/zxG1MFuleTfPEmp+wczmKh/1BwAA//+6kLAWAAAABklEQVQDAAGbexFZ49vVAAAAAElFTkSuQmCC\" alt=\"Blender\" style={{width: 24, height: 24}}/>}\r\n            sx = {{\r\n              backgroundColor: \"#214C93\",\r\n              color: \"white\",\r\n              ...sx}}\r\n            {...rest}\r\n      />\r\n  );\r\n};","import * as React from 'react';\r\nimport {useEffect} from 'react';\r\nimport {Stack} from \"@mui/material\";\r\nimport {Link as RouterLink, useSearchParams} from \"react-router-dom\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport {NodeTreeProfile} from \"../../proto/application/nodetreestore/NodeTreeStoreMessage\";\r\nimport {\r\n  deleteNodeTree,\r\n  getNodeTree,\r\n  likeNodeTree,\r\n  unlikeNodeTree,\r\n  updateDescription,\r\n  updateTags\r\n} from \"./service/NodeTreeStoreService\";\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport {Typography} from \"../../component/wrapper/MuiWrappers\";\r\nimport {ResourceType} from \"../../proto/framework/ResourceMessage\";\r\nimport CommentWidget from \"../comment/CommentWidget\";\r\nimport {getLikeCount, getUserLike} from \"./NodeTreeStoreUtil\";\r\nimport ProfileAvatar from \"../customer/component/ProfileAvatar\";\r\nimport {get_node_tree_store_url} from \"../../navigation/routerUtil\";\r\nimport {timeForRender} from \"../../api/util/TimeUtil\";\r\nimport ImageContainer from \"../../component/container/ImageContainer\";\r\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\r\nimport HelpIcon from '@mui/icons-material/Help';\r\nimport ThumbUpAltIcon from \"@mui/icons-material/ThumbUpAlt\";\r\nimport ThumbUpOffAltIcon from \"@mui/icons-material/ThumbUpOffAlt\";\r\nimport {toReadableNumber} from \"../../api/util/StringUtil\";\r\nimport AlertContext from \"../../context/AlertContext\";\r\nimport ListComponent from \"../../component/container/ListComponent\";\r\nimport {EngineChip} from \"./component/EngineChip\";\r\nimport {TypeChip} from \"./component/TypeChip\";\r\nimport {BlenderChip} from \"./component/BlenderChip\";\r\nimport ClearableTextField from \"../../component/input/ClearableTextField\";\r\nimport CopyButton from \"../../component/button/CopyButton\";\r\nimport {openDialog, openDialogWithPromise} from \"../../component/dialog/DialogManager\";\r\nimport {useIsUserOrAdmin, useSmartNavigate} from \"../../hook/CommonUiHook\";\r\nimport {NodeTreePreviewDefaultImg,} from \"./component/NodeTreePreviewDefaultImg\";\r\nimport OneOf from \"../../component/container/OneOf\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype NodeTreeItemWidgetProps = {};\r\nconst NodeTreeItemWidget = (props: NodeTreeItemWidgetProps) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const navigate = useSmartNavigate();\r\n  const {t} = useTranslation();\r\n  const {showAlert} = React.useContext(AlertContext);\r\n\r\n  const [nodeTreeProfile, setNodeTreeProfole] = React.useState<NodeTreeProfile | undefined>(void 0);\r\n\r\n  const [like, setLike] = React.useState<boolean>(false);\r\n  const [likeCount, setLikeCount] = React.useState<number>(0);\r\n  const [likeLoading, setLikeLoading] = React.useState<boolean>(false);\r\n\r\n  const [editingTags, setEditingTags] = React.useState<boolean>(false);\r\n  const [tagsInLine, setTagsInLine] = React.useState<string>(\"\");\r\n  const [editingDescription, setEditionDescription] = React.useState<boolean>(false);\r\n  const [description, setDescription] = React.useState<string>(\"\");\r\n  const [refresh, setRefresh] = React.useState<boolean>(false);\r\n\r\n  const canEdit = useIsUserOrAdmin(nodeTreeProfile?.owner?.id);\r\n\r\n  const toTagsInLine = (tags: string[]) => {\r\n    if (!tags) {\r\n      return \"\";\r\n    }\r\n    return tags.map((tag) => {\r\n      return \"#\" + tag;\r\n    }).join(\" \");\r\n  }\r\n\r\n  const toTagsInArray = (tagsInLine: string) => {\r\n    return tagsInLine.split(\" #\").map((tag) => {\r\n      return tag.trim().replace(\"#\", \"\");\r\n    }).filter((tag) => {\r\n      return tag.length > 0;\r\n    });\r\n  }\r\n\r\n  const getCopyContent = () => {\r\n    return JSON.stringify({\r\n      \"node_tree_id\": nodeTreeProfile?.id,\r\n      \"node_tree_type\": nodeTreeProfile?.type\r\n    });\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const id = searchParams.get(\"id\");\r\n    if (!id) {\r\n      return;\r\n    }\r\n    getNodeTree(id).then((profile) => {\r\n      setNodeTreeProfole(profile);\r\n      setLike(getUserLike(profile));\r\n      setLikeCount(getLikeCount(profile));\r\n      setTagsInLine(toTagsInLine(profile.tags))\r\n      setDescription(profile.description);\r\n\r\n    }).catch((e) => {\r\n      showAlert(e.message, \"error\");\r\n    });\r\n\r\n  }, [searchParams, refresh]);\r\n\r\n  if (!nodeTreeProfile) {\r\n    return <Stack>\r\n\r\n    </Stack>\r\n  }\r\n\r\n  return <Stack spacing={1}>\r\n    <Stack direction={{\r\n      xs: \"column\",\r\n      md: \"row\"\r\n    }} spacing={1}\r\n           justifyContent={\r\n      \"space-around\"\r\n    }>\r\n      <Typography variant={\"h4\"}>{nodeTreeProfile.name}</Typography>\r\n      <Stack direction={\"row\"} justifyContent={\"center\"} alignItems={\"center\"}  flexWrap={\"wrap\"} rowGap={1} spacing={1}>\r\n        <RouterLink to={get_node_tree_store_url(\"\", \"\", \"\", nodeTreeProfile.engine)}> <EngineChip\r\n            engine={nodeTreeProfile.engine}/></RouterLink>\r\n        <RouterLink to={get_node_tree_store_url(\"\", \"\", nodeTreeProfile.type, \"\")}><TypeChip\r\n            type={nodeTreeProfile.type}/></RouterLink>\r\n        <BlenderChip version={nodeTreeProfile.blenderVersion}/>\r\n        <ProfileAvatar avatarUrl={nodeTreeProfile.owner?.avatarUrl}\r\n                       title={nodeTreeProfile.owner?.name}\r\n                       sx={{width: 32, height: 32}}\r\n                       profileLink={get_node_tree_store_url(\"\", nodeTreeProfile.owner?.id, \"\", \"\")}\r\n        />\r\n        <Chip\r\n            label={timeForRender(nodeTreeProfile.updateAt)}\r\n            variant={\"outlined\"}\r\n        />\r\n        {canEdit && <Chip\r\n            label={<DeleteForeverIcon fontSize={\"small\"}/>}\r\n            title={\"Delete\"}\r\n            sx={{backgroundColor: \"red\", color: \"white\", borderRadius: 0}}\r\n            onClick={() => {\r\n              deleteNodeTree(nodeTreeProfile.id).then(() => {\r\n                navigate(get_node_tree_store_url())\r\n              });\r\n            }}\r\n            variant={\"filled\"}\r\n        />}\r\n      </Stack>\r\n    </Stack>\r\n    {editingTags ? <ClearableTextField\r\n            value={tagsInLine}\r\n            clearAction={() => {\r\n              setEditingTags(false);\r\n              setTagsInLine(toTagsInLine(nodeTreeProfile.tags));\r\n            }}\r\n            placeholder={\"#tag1 #tag2\"}\r\n            setValue={setTagsInLine} onSubmit={() => {\r\n          updateTags(nodeTreeProfile.id, toTagsInArray(tagsInLine)).then(() => {\r\n            setRefresh(!refresh);\r\n          }).catch((e) => {\r\n            showAlert(e.message, \"error\");\r\n          });\r\n          setEditingTags(false);\r\n        }}/> :\r\n        <Stack direction={\"row\"} alignItems={\"center\"} justifyContent={\"center\"} flexWrap={\"wrap\"} rowGap={1}>\r\n          <ListComponent data={[...nodeTreeProfile.tags]}\r\n                         renderItem={(tag, index) => {\r\n                           return <RouterLink key={index + tag}\r\n                                              to={get_node_tree_store_url(tag, \"\", \"\", \"\")}>\r\n                             <Chip label={tag}\r\n                                   sx={{margin: 0.5}}\r\n                                   variant={\"outlined\"}/></RouterLink>\r\n                               ;\r\n                         }}/>\r\n          {canEdit && <Chip\r\n              label={<EditIcon fontSize={\"small\"}/>}\r\n              onClick={() => {\r\n                setEditingTags(true);\r\n              }}\r\n              variant={\"outlined\"}\r\n          />}\r\n        </Stack>\r\n    }\r\n    <Stack direction={\"row\"} justifyContent={\"center\"} alignItems={\"center\"} spacing={1}>\r\n      <OneOf index={nodeTreeProfile.avatarUrl === void 0 ? 0 : 1}>\r\n        <NodeTreePreviewDefaultImg type={nodeTreeProfile.type} height={\"70dvh\"}/>\r\n        <ImageContainer src={nodeTreeProfile.avatarUrl as string}\r\n                        sx={{width: \"100%\", maxHeight: \"70dvh\", objectFit: \"contain\"}}\r\n                        skeletonSx={{height: \"70dvh\"}}/>\r\n      </OneOf>\r\n      {canEdit && <Chip\r\n          label={<EditIcon fontSize={\"small\"}/>}\r\n          onClick={async () => {\r\n            const result = await openDialogWithPromise(\"EditNodeTreeAvatarDialog\", {\r\n              nodeTreeId: nodeTreeProfile.id,\r\n              avatarUrl: nodeTreeProfile.avatarUrl,\r\n              type: nodeTreeProfile?.type\r\n            });\r\n            if (result.success) {\r\n              // refresh\r\n              setRefresh(!refresh);\r\n            }\r\n          }}\r\n          variant={\"outlined\"}\r\n      />}\r\n    </Stack>\r\n    {editingDescription ?\r\n        <ClearableTextField value={description}\r\n                            placeholder={\"Description about the node tree\"}\r\n                            setValue={setDescription}\r\n                            onSubmit={() => {\r\n                              updateDescription(nodeTreeProfile.id, description).then(() => {\r\n                                setRefresh(!refresh);\r\n                              }).catch((e) => {\r\n                                showAlert(e.message, \"error\");\r\n                              });\r\n                              setEditionDescription(false);\r\n                            }}\r\n                            clearAction={() => {\r\n                              setEditionDescription(false);\r\n                              setDescription(nodeTreeProfile.description);\r\n                            }}\r\n        />\r\n        :\r\n        <Stack direction={\"row\"} alignItems={\"center\"} justifyContent={\"start\"}\r\n        ><Typography variant={\"body1\"} flexGrow={1}\r\n                     textAlign={\"start\"}>{ nodeTreeProfile.description.length === 0 ? \"No Description about this NodeTree\" :  nodeTreeProfile.description}</Typography>\r\n          {canEdit && <Chip\r\n              label={<EditIcon fontSize={\"small\"}/>}\r\n              title={\"Edit Description\"}\r\n              onClick={() => {\r\n                setEditionDescription(true);\r\n              }}\r\n              variant={\"outlined\"}\r\n          />}\r\n        </Stack>\r\n    }\r\n    <Stack direction={\"row\"} alignItems={\"center\"} spacing={1}>\r\n      <Chip\r\n          onClick={\r\n            () => {\r\n              if (likeLoading) {\r\n                return;\r\n              }\r\n              setLikeLoading(true);\r\n              if (!like) {\r\n                likeNodeTree(nodeTreeProfile.id).then(() => {\r\n                  setLike(true);\r\n                  setLikeCount(likeCount + 1);\r\n                }).catch((e) => {\r\n                  showAlert(e.message, \"error\");\r\n                }).finally(() => {\r\n                  setLikeLoading(false);\r\n                });\r\n              } else {\r\n                unlikeNodeTree(nodeTreeProfile.id).then(() => {\r\n                  setLike(false);\r\n                  setLikeCount(likeCount - 1);\r\n                }).catch((e) => {\r\n                  showAlert(e.message, \"error\");\r\n                }).finally(() => {\r\n                  setLikeLoading(false);\r\n                });\r\n              }\r\n            }\r\n          }\r\n          variant={\"filled\"}\r\n          color={like ? \"primary\" : \"default\"}\r\n          sx={{borderRadius: 0}}\r\n          icon={like ? <ThumbUpAltIcon/> :\r\n              <ThumbUpOffAltIcon/>}\r\n          label={toReadableNumber(likeCount)}\r\n      />\r\n      <ClearableTextField value={getCopyContent()} onSubmit={() => void 0}\r\n                          setValue={(value) => void 0}\r\n                          sx={{flexGrow: 1}}\r\n                          disabled\r\n                          size={\"small\"}\r\n                          variant={\"standard\"}\r\n                          endAdornment={<CopyButton text={getCopyContent()}/>}/>\r\n      <Chip\r\n          onClick={() => {\r\n            openDialog(\"NodeTreeHelperDialog\")\r\n          }}\r\n          variant={\"filled\"}\r\n          color={\"info\"}\r\n          icon={<HelpIcon/>}\r\n          sx={{borderRadius: 0}}\r\n          label={t(\"How to use\")}\r\n      />\r\n    </Stack>\r\n\r\n\r\n    <CommentWidget objectId={nodeTreeProfile.id}\r\n                   targetType={ResourceType.RESOURCE_TYPE_NODE_TREE}\r\n                   canDelete={canEdit}\r\n                   paddingTop={8}\r\n    />\r\n  </Stack>\r\n};\r\n\r\nexport default NodeTreeItemWidget;","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z\"\n}), 'ContentCopy');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z\"\n}), 'Edit');"],"names":["CopyButton","_ref","text","icon","_jsx","ContentCopyIcon","rest","IconButton","onClick","copy","Function","children","React","createSvgIcon","d","EngineChip","engine","sx","Chip","label","getEngineLabel","backgroundColor","getEngineColor","color","TypeChip","type","typeToLabel","getTypeColor","BlenderChip","version","avatar","src","alt","style","width","height","props","_nodeTreeProfile$owne","_nodeTreeProfile$owne2","_nodeTreeProfile$owne3","_nodeTreeProfile$owne4","searchParams","setSearchParams","useSearchParams","navigate","useSmartNavigate","t","useTranslation","showAlert","AlertContext","nodeTreeProfile","setNodeTreeProfole","like","setLike","likeCount","setLikeCount","likeLoading","setLikeLoading","editingTags","setEditingTags","tagsInLine","setTagsInLine","editingDescription","setEditionDescription","description","setDescription","refresh","setRefresh","canEdit","useIsUserOrAdmin","owner","id","toTagsInLine","tags","map","tag","join","getCopyContent","JSON","stringify","useEffect","get","getNodeTree","then","profile","getUserLike","getLikeCount","catch","e","message","_jsxs","Stack","spacing","direction","xs","md","justifyContent","Typography","variant","name","alignItems","flexWrap","rowGap","RouterLink","to","get_node_tree_store_url","blenderVersion","ProfileAvatar","avatarUrl","title","profileLink","timeForRender","updateAt","DeleteForeverIcon","fontSize","borderRadius","deleteNodeTree","ClearableTextField","value","clearAction","placeholder","setValue","onSubmit","updateTags","split","trim","replace","filter","length","toTagsInArray","ListComponent","data","renderItem","index","margin","EditIcon","OneOf","NodeTreePreviewDefaultImg","ImageContainer","maxHeight","objectFit","skeletonSx","async","openDialogWithPromise","nodeTreeId","success","updateDescription","flexGrow","textAlign","unlikeNodeTree","finally","likeNodeTree","ThumbUpAltIcon","ThumbUpOffAltIcon","toReadableNumber","disabled","size","endAdornment","openDialog","HelpIcon","CommentWidget","objectId","targetType","ResourceType","RESOURCE_TYPE_NODE_TREE","canDelete","paddingTop"],"sourceRoot":""}