import{c as O,a2 as Q,r as i,a4 as Y,j as a,S as M,T as U,bo as X,bT as z,bU as Z,bV as _,ak as ee,bW as te,bX as re,bv as $}from"./index-CUbU1K4J.js";const ce=()=>{const e=O.c(48),[g,w]=Q(),{showAlert:c}=i.useContext(Y);let y;e[0]!==g?(y=g.get("id")?parseInt(g.get("id")||"-1"):null,e[0]=g,e[1]=y):y=e[1];const s=y,[C,G]=i.useState(""),[A,H]=i.useState(""),[E,J]=i.useState(""),[F,K]=i.useState(0),[l,R]=i.useState(""),[u,W]=i.useState(1),[d,B]=i.useState(""),[n,q]=i.useState(""),[,v]=i.useState(void 0),[V,f]=i.useState(!1),[k,L]=i.useState(!1);let j;e[2]!==s||e[3]!==c?(j=()=>{s!==null&&s>=0&&te(void 0,[s]).then(t=>{if(t.products&&t.products.length>0){const o=t.products[0];G(o.name),H(o.description),J(o.coverImageUrl),K(o.price)}}).catch(t=>{c(`Failed to fetch product info: ${t}`,"error")})},e[2]=s,e[3]=c,e[4]=j):j=e[4];let D;e[5]!==s?(D=[s],e[5]=s,e[6]=D):D=e[6],i.useEffect(j,D);let T;e[7]!==n||e[8]!==d||e[9]!==l||e[10]!==u||e[11]!==w||e[12]!==c?(T=()=>{if(f(!0),l.trim()===""){v("Product name cannot be empty"),f(!1);return}if(u<=0){v("Product price must be greater than 0"),f(!1);return}if(d.trim()===""){v("Product description cannot be empty"),f(!1);return}if(n.trim()===""){v("Product cover image URL cannot be empty"),f(!1);return}re(l,d,n,u).then(t=>{w(o=>(t.id&&o.set("id",t.id.toString()),W(1),R(""),B(""),q(""),c(`Product created successfully, product ID: ${t.id}`,"success"),o))}).catch(t=>{c(`Failed to create product: ${t}`,"error")}).finally(()=>{f(!1)})},e[7]=n,e[8]=d,e[9]=l,e[10]=u,e[11]=w,e[12]=c,e[13]=T):T=e[13];const r=T;let I;e[14]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(U,{variant:"h6",children:"Payment Test Widget"}),e[14]=I):I=e[14];let m;e[15]!==k||e[16]!==E||e[17]!==A||e[18]!==s||e[19]!==C||e[20]!==F||e[21]!==c?(m=s!==null&&a.jsxs(M,{children:[a.jsxs(U,{children:["Product ID: ",s,", Name: ",C]}),a.jsxs(U,{children:["Description: ",A]}),a.jsx(X,{src:E}),a.jsxs(U,{children:["Price (USD): $",F.toFixed(2)]}),a.jsx(z,{variant:"contained",loading:k,onClick:()=>{L(!0),Z(s).then(t=>{_(t),c(`Transaction created successfully, transaction ID: ${t.id}, client secrete: ${t.clientSecret}`,"success"),ee("TransactionDialog",{transactionId:t.id,externalTransactionId:t.externalTransactionId,clientSecret:t.clientSecret||""}).then(o=>{o.success?c(`Transaction ${o.data.id} completed successfully`,"success"):c(`Transaction ${o.data.id} failed`,"error")}).finally(()=>{L(!1)})}).catch(t=>{c(`Failed to create transaction: ${t}`,"error")}).finally(()=>{L(!1)})},children:"Buy"})]}),e[15]=k,e[16]=E,e[17]=A,e[18]=s,e[19]=C,e[20]=F,e[21]=c,e[22]=m):m=e[22];let P;e[23]!==l||e[24]!==r?(P=a.jsx($,{value:l,setValue:R,onSubmit:r,label:"Product Name"}),e[23]=l,e[24]=r,e[25]=P):P=e[25];let p;e[26]!==d||e[27]!==r?(p=a.jsx($,{value:d,setValue:B,onSubmit:r,label:"Product Description"}),e[26]=d,e[27]=r,e[28]=p):p=e[28];let h;e[29]!==n?(h=n.length>0&&a.jsx(X,{src:n}),e[29]=n,e[30]=h):h=e[30];let S;e[31]!==n||e[32]!==r?(S=a.jsx($,{setValue:q,value:n,onSubmit:r,label:"Product Cover Image URL"}),e[31]=n,e[32]=r,e[33]=S):S=e[33];let x;e[34]!==u||e[35]!==r?(x=a.jsx($,{value:u,setValue:W,onSubmit:r,label:"Product Price (USD)",type:"number"}),e[34]=u,e[35]=r,e[36]=x):x=e[36];let b;e[37]!==V||e[38]!==r?(b=a.jsx(z,{variant:"contained",onClick:r,loading:V,children:"Create Product"}),e[37]=V,e[38]=r,e[39]=b):b=e[39];let N;return e[40]!==x||e[41]!==b||e[42]!==m||e[43]!==P||e[44]!==p||e[45]!==h||e[46]!==S?(N=a.jsxs(M,{children:[I,m,P,p,h,S,x,b]}),e[40]=x,e[41]=b,e[42]=m,e[43]=P,e[44]=p,e[45]=h,e[46]=S,e[47]=N):N=e[47],N};export{ce as default};
