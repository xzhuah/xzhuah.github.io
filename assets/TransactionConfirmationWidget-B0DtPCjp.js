import{q as se,j as t,c as Se,a2 as ge,r as k,a4 as je,bY as r,T as s,S as P,x as o,bZ as be,aO as ye,b_ as Te,D as _e,bn as Ce,a5 as ve}from"./index-B0xRIY9c.js";import{P as Ae}from"./ProductComponent-ztfEeN_4.js";import{a as Ie,C as we}from"./CardContent-D-SN6H-M.js";import{C as Ne}from"./Container-2pZC0VXb.js";import"./CardMedia-Do82jrN3.js";const Re=se(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Ue=se(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),he=se(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),Ee=se(t.jsx("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"})),Pe=e=>{switch(e){case r.TRANSACTION_STATUS_SUCCESS:return{color:"success",icon:t.jsx(Ue,{}),label:"Payment Successful",description:"Your transaction has been completed successfully."};case r.TRANSACTION_STATUS_PENDING:return{color:"warning",icon:t.jsx(Ee,{}),label:"Payment Pending",description:"Your transaction is currently being processed."};case r.TRANSACTION_STATUS_FAILED:return{color:"error",icon:t.jsx(he,{}),label:"Payment Failed",description:"The transaction failed to process."};case r.TRANSACTION_STATUS_CANCELED:case r.TRANSACTION_STATUS_REFUNDED:return{color:"default",icon:t.jsx(Re,{}),label:e===r.TRANSACTION_STATUS_REFUNDED?"Refunded":"Canceled",description:"The transaction has been canceled or refunded."};default:return{color:"default",icon:t.jsx(he,{}),label:"Unknown Status",description:"Transaction status is unknown."}}},Fe=()=>{const e=Se.c(80),[L]=ge(),{showAlert:i}=k.useContext(je);let z;e[0]!==L?(z=L.get("id")?parseInt(L.get("id")||"-1"):null,e[0]=L,e[1]=z):z=e[1];const l=z,[c,xe]=k.useState(null),[ue,me]=k.useState(!1);let O,W;if(e[2]!==i||e[3]!==l?(O=()=>{if(l!==null&&l>=0?(me(!0),be(l).then(E=>{if(E===null){i("Transaction not found","error");return}xe(E)}).catch(E=>{i(`Failed to advance transaction: ${E}`,"error")}).finally(()=>{me(!1)})):i("Invalid transaction ID","error"),new URLSearchParams(window.location.search).get("redirect_status")){const E=window.location.origin+window.location.pathname+window.location.hash;window.history.replaceState(null,"",E)}},W=[l,i],e[2]=i,e[3]=l,e[4]=O,e[5]=W):(O=e[4],W=e[5]),k.useEffect(O,W),ue){let D;return e[6]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs(P,{alignItems:"center",justifyContent:"center",sx:{minHeight:"50vh",gap:2},children:[t.jsx(ye,{size:60}),t.jsx(s,{variant:"h6",color:"text.secondary",children:"Verifying transaction..."})]}),e[6]=D):D=e[6],D}if(!c||!c.product)return null;const{product:ne,buyer:n,amount:ae,transactionStatus:F,createDate:pe,externalTransactionId:V}=c;let H;e[7]!==F?(H=Pe(F),e[7]=F,e[8]=H):H=e[8];const a=H,M=F===r.TRANSACTION_STATUS_SUCCESS;let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B={py:4},e[9]=B):B=e[9];let Y;e[10]===Symbol.for("react.memo_cache_sentinel")?(Y={borderRadius:2,overflow:"visible"},e[10]=Y):Y=e[10];const oe=M?"success.light":"grey.100";let d;e[11]!==oe?(d={bgcolor:oe,p:3,textAlign:"center",borderTopLeftRadius:8,borderTopRightRadius:8},e[11]=oe,e[12]=d):d=e[12];const re=`${a.color}.main`;let f;e[13]!==re?(f={bgcolor:"background.paper",borderRadius:"50%",p:1,display:"flex",color:re},e[13]=re,e[14]=f):f=e[14];let m;e[15]!==a.icon?(m=k.cloneElement(a.icon),e[15]=a.icon,e[16]=m):m=e[16];let h;e[17]!==m||e[18]!==f?(h=t.jsx(o,{sx:f,children:m}),e[17]=m,e[18]=f,e[19]=h):h=e[19];let x;e[20]!==a.label?(x=t.jsx(s,{variant:"h5",fontWeight:"bold",children:a.label}),e[20]=a.label,e[21]=x):x=e[21];let u;e[22]!==a.description?(u=t.jsx(s,{variant:"body2",color:"text.secondary",children:a.description}),e[22]=a.description,e[23]=u):u=e[23];let p;e[24]!==M?(p=!M&&t.jsx(Te,{severity:"warning",sx:{mt:2,width:"100%",maxWidth:500},children:"If you have any questions about this order, please contact the site administrator with your Transaction ID."}),e[24]=M,e[25]=p):p=e[25];let S;e[26]!==h||e[27]!==x||e[28]!==u||e[29]!==p?(S=t.jsxs(P,{alignItems:"center",spacing:1,children:[h,x,u,p]}),e[26]=h,e[27]=x,e[28]=u,e[29]=p,e[30]=S):S=e[30];let g;e[31]!==S||e[32]!==d?(g=t.jsx(o,{sx:d,children:S}),e[31]=S,e[32]=d,e[33]=g):g=e[33];let $;e[34]===Symbol.for("react.memo_cache_sentinel")?($={p:4},e[34]=$):$=e[34];let j;e[35]!==ae||e[36]!==ne?(j=t.jsx(Ae,{product:ne,displayPrice:ae}),e[35]=ae,e[36]=ne,e[37]=j):j=e[37];let q;e[38]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(_e,{}),e[38]=q):q=e[38];let G;e[39]===Symbol.for("react.memo_cache_sentinel")?(G={xs:"1fr",sm:"1fr 1fr"},e[39]=G):G=e[39];let Z;e[40]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(s,{variant:"overline",color:"text.secondary",fontWeight:"bold",children:"Transaction Info"}),e[40]=Z):Z=e[40];let J;e[41]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(s,{variant:"caption",color:"text.secondary",display:"block",children:"Transaction ID"}),e[41]=J):J=e[41];let b;e[42]!==c.id?(b=t.jsxs(P,{spacing:1,children:[Z,t.jsxs(o,{children:[J,t.jsxs(s,{variant:"body2",fontFamily:"monospace",children:["#",c.id]})]})]}),e[42]=c.id,e[43]=b):b=e[43];let y;e[44]!==V?(y=V&&t.jsxs(o,{children:[t.jsx(s,{variant:"caption",color:"text.secondary",display:"block",children:"External Ref"}),t.jsx(s,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:V})]}),e[44]=V,e[45]=y):y=e[45];let K;e[46]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(s,{variant:"caption",color:"text.secondary",display:"block",children:"Date"}),e[46]=K):K=e[46];const ie=Number(pe);let T;e[47]!==ie?(T=new Date(ie).toLocaleString(),e[47]=ie,e[48]=T):T=e[48];let _;e[49]!==T?(_=t.jsxs(o,{children:[K,t.jsx(s,{variant:"body2",children:T})]}),e[49]=T,e[50]=_):_=e[50];let C;e[51]!==b||e[52]!==y||e[53]!==_?(C=t.jsxs(o,{display:"grid",gridTemplateColumns:G,gap:3,children:[b,y,_]}),e[51]=b,e[52]=y,e[53]=_,e[54]=C):C=e[54];let v;e[55]!==j||e[56]!==C?(v=t.jsxs(P,{spacing:4,children:[j,q,C]}),e[55]=j,e[56]=C,e[57]=v):v=e[57];let Q;e[58]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(s,{variant:"overline",color:"text.secondary",fontWeight:"bold",children:"Customer"}),e[58]=Q):Q=e[58];let X;e[59]===Symbol.for("react.memo_cache_sentinel")?(X={p:1,bgcolor:"grey.50",borderRadius:1},e[59]=X):X=e[59];const le=(n==null?void 0:n.name)||"User",ce=n==null?void 0:n.avatarUrl,de=n==null?void 0:n.id;let A;e[60]!==de?(A=Ce(de),e[60]=de,e[61]=A):A=e[61];let I;e[62]!==le||e[63]!==ce||e[64]!==A?(I=t.jsx(ve,{title:le,avatarUrl:ce,profileLink:A}),e[62]=le,e[63]=ce,e[64]=A,e[65]=I):I=e[65];const fe=(n==null?void 0:n.name)||"Unknown User";let w;e[66]!==fe?(w=t.jsx(s,{variant:"subtitle2",fontWeight:"bold",children:fe}),e[66]=fe,e[67]=w):w=e[67];let ee;e[68]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(s,{variant:"caption",color:"text.secondary",children:"Buyer"}),e[68]=ee):ee=e[68];let N;e[69]!==w?(N=t.jsxs(o,{children:[w,ee]}),e[69]=w,e[70]=N):N=e[70];let R;e[71]!==I||e[72]!==N?(R=t.jsxs(P,{spacing:1,children:[Q,t.jsxs(P,{direction:"row",alignItems:"center",spacing:2,sx:X,children:[I,N]})]}),e[71]=I,e[72]=N,e[73]=R):R=e[73];let U;e[74]!==v||e[75]!==R?(U=t.jsxs(Ie,{sx:$,children:[v,R]}),e[74]=v,e[75]=R,e[76]=U):U=e[76];let te;return e[77]!==g||e[78]!==U?(te=t.jsx(Ne,{maxWidth:"md",sx:B,children:t.jsxs(we,{elevation:3,sx:Y,children:[g,U]})}),e[77]=g,e[78]=U,e[79]=te):te=e[79],te};export{Fe as default};
