import{q as E,j as t,Z as V,r as h,a4 as k,aw as q,b$ as $,S as u,aS as z,D as F,aO as B,x as W,aJ as G,bO as J,c as K,e as Q,bY as w}from"./index-CuMhGs3H.js";import{A as Y}from"./AccessTime-DLxflDCf.js";import{P as Z}from"./ProductComponent-BLG4lsti.js";import{C as X}from"./Container-CP4ZttHh.js";import{C as ee,a as te}from"./CardContent-C5hCWalE.js";import{C as se}from"./Chip-s59dnIfP.js";import"./CardMedia-Blh7qRvL.js";const ae=E(t.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),D=E(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),ne=E(t.jsx("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),U=E(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),M=E([t.jsx("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z"},"0"),t.jsx("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"1")]),oe=c=>{switch(c){case w.TRANSACTION_STATUS_SUCCESS:return{label:"Success",color:"success",icon:t.jsx(ne,{})};case w.TRANSACTION_STATUS_PENDING:return{label:"Pending",color:"warning",icon:t.jsx(Y,{})};case w.TRANSACTION_STATUS_FAILED:return{label:"Failed",color:"error",icon:t.jsx(U,{})};case w.TRANSACTION_STATUS_REFUNDED:return{label:"Refunded",color:"default",icon:t.jsx(D,{})};case w.TRANSACTION_STATUS_CANCELED:return{label:"Canceled",color:"default",icon:t.jsx(D,{})};default:return{label:"Unknown",color:"default",icon:t.jsx(U,{})}}},re=c=>{const e=K.c(57),{transaction:s}=c,{t:R}=V(),i=Q(),S=s.transactionStatus||w.TRANSACTION_STATUS_UNKNOWN;let r,f,l,d,n,p,m,x,j,a,o,g;e[0]!==S||e[1]!==R||e[2]!==i.palette.primary.main?(n=oe(S),d=ee,o="outlined",e[15]!==i.palette.primary.main?(g={mb:2,borderRadius:2,"&:hover":{borderColor:i.palette.primary.main}},e[15]=i.palette.primary.main,e[16]=g):g=e[16],l=W,e[17]===Symbol.for("react.memo_cache_sentinel")?(a={bgcolor:"grey.50",px:2,py:1.5,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1},e[17]=a):a=e[17],f=u,m="row",x=2,j="center",r=se,p=R(n.label),e[0]=S,e[1]=R,e[2]=i.palette.primary.main,e[3]=r,e[4]=f,e[5]=l,e[6]=d,e[7]=n,e[8]=p,e[9]=m,e[10]=x,e[11]=j,e[12]=a,e[13]=o,e[14]=g):(r=e[3],f=e[4],l=e[5],d=e[6],n=e[7],p=e[8],m=e[9],x=e[10],j=e[11],a=e[12],o=e[13],g=e[14]);let T;e[18]!==r||e[19]!==n.color||e[20]!==n.icon||e[21]!==p?(T=t.jsx(r,{label:p,color:n.color,size:"small",icon:n.icon,variant:"outlined"}),e[18]=r,e[19]=n.color,e[20]=n.icon,e[21]=p,e[22]=T):T=e[22];let P;e[23]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(ae,{sx:{fontSize:14,color:"text.secondary"}}),e[23]=P):P=e[23];const L=Number(s.createDate);let y;e[24]!==L?(y=new Date(L).toLocaleString(),e[24]=L,e[25]=y):y=e[25];let C;e[26]!==y?(C=t.jsxs(u,{direction:"row",spacing:.5,alignItems:"center",children:[P,t.jsx(z,{variant:"caption",color:"text.secondary",children:y})]}),e[26]=y,e[27]=C):C=e[27];let b;e[28]!==f||e[29]!==C||e[30]!==m||e[31]!==x||e[32]!==j||e[33]!==T?(b=t.jsxs(f,{direction:m,spacing:x,alignItems:j,children:[T,C]}),e[28]=f,e[29]=C,e[30]=m,e[31]=x,e[32]=j,e[33]=T,e[34]=b):b=e[34];let I;e[35]!==s.id?(I=t.jsxs(z,{variant:"caption",fontFamily:"monospace",color:"text.secondary",children:["ID: #",s.id]}),e[35]=s.id,e[36]=I):I=e[36];let v;e[37]!==l||e[38]!==b||e[39]!==I||e[40]!==a?(v=t.jsxs(l,{sx:a,children:[b,I]}),e[37]=l,e[38]=b,e[39]=I,e[40]=a,e[41]=v):v=e[41];let H;e[42]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(F,{}),e[42]=H):H=e[42];let A;e[43]!==s.amount||e[44]!==s.product?(A=s.product&&t.jsx(Z,{product:s.product,displayPrice:s.amount,hideHeader:!0}),e[43]=s.amount,e[44]=s.product,e[45]=A):A=e[45];let N;e[46]!==s.externalTransactionId?(N=s.externalTransactionId&&t.jsx(u,{direction:"row",justifyContent:"flex-end",mt:2,children:t.jsxs(z,{variant:"caption",color:"text.disabled",children:["Ext Ref: ",s.externalTransactionId]})}),e[46]=s.externalTransactionId,e[47]=N):N=e[47];let _;e[48]!==A||e[49]!==N?(_=t.jsxs(te,{children:[A,N]}),e[48]=A,e[49]=N,e[50]=_):_=e[50];let O;return e[51]!==d||e[52]!==v||e[53]!==_||e[54]!==o||e[55]!==g?(O=t.jsxs(d,{variant:o,sx:g,children:[v,H,_]}),e[51]=d,e[52]=v,e[53]=_,e[54]=o,e[55]=g,e[56]=O):O=e[56],O},he=()=>{const{t:c}=V(),{showAlert:e}=h.useContext(k),[s,R]=h.useState([]),[i,S]=h.useState(!1),[r,f]=h.useState(1),[l]=h.useState(100),[d,n]=h.useState(0),[p,m]=h.useState(0),x=h.useCallback(async()=>{S(!0);try{const a=q.create();a.page=r-1,a.pageSize=l;const o=await $(a);R(o.transactions||[]),o.pageResult?(n(o.pageResult.totalPage||0),m(o.pageResult.total||0)):(n(0),m(0))}catch(a){e(c("Failed to load transaction history"),"error"),console.error(a)}finally{S(!1)}},[r,l,e,c]);h.useEffect(()=>{x()},[x]);const j=(a,o)=>{f(o),window.scrollTo({top:0,behavior:"smooth"})};return t.jsx(X,{maxWidth:"md",children:t.jsxs(u,{spacing:3,sx:{py:4},children:[t.jsxs(u,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsxs(u,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(M,{color:"primary"}),t.jsx(z,{variant:"h5",fontWeight:"bold",children:c("Order History")})]}),!i&&p>0&&t.jsxs(z,{variant:"body2",color:"text.secondary",children:[c("Total"),": ",p]})]}),t.jsx(F,{}),i?t.jsx(u,{alignItems:"center",py:5,children:t.jsx(B,{})}):s.length===0?t.jsxs(u,{alignItems:"center",py:8,spacing:2,sx:{opacity:.6},children:[t.jsx(M,{sx:{fontSize:60,color:"grey.300"}}),t.jsx(z,{variant:"body1",color:"text.secondary",children:c("No transactions found.")})]}):t.jsx(W,{children:t.jsx(G,{data:s,renderItem:a=>t.jsx(re,{transaction:a},a.id)})}),!i&&s.length>0&&t.jsx(u,{alignItems:"center",pt:2,children:t.jsx(J,{count:d,page:r,onChange:j,color:"primary",variant:"outlined",shape:"rounded",sx:{visibility:d>1?"visible":"hidden"}})})]})})};export{he as default};
