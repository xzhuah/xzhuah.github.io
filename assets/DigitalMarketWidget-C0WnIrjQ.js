import{q as J,j as i,c as H,a2 as K,Z as X,r as T,a4 as ee,bR as te,v as se,w as ie,a3 as Q,ac as U,ak as re,c1 as Y,x as V,aO as le,T as G,S as N,bO as ae,af as $,a5 as oe,c2 as ne,aw as ce,c3 as de,c4 as fe,c5 as me,bV as ge}from"./index-CuMhGs3H.js";import{S as he,G as Z}from"./ShoppingCart-BqLPgVAh.js";import{A as pe}from"./Add-D3pvUim0.js";import{C as xe}from"./CardMedia-Blh7qRvL.js";import{a as ue,C as ye}from"./CardContent-C5hCWalE.js";import{C as je}from"./CardActionArea-F_QkIGkM.js";import{C as we}from"./Container-CP4ZttHh.js";const ve=J(i.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"})),be=e=>{var z,R,M;const t=H.c(52),{asset:c}=e,{product:s}=c,v=Q();if(!s)return null;let P;t[0]===Symbol.for("react.memo_cache_sentinel")?(P={height:"100%",display:"flex",flexDirection:"column",borderRadius:3,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:6}},t[0]=P):P=t[0];let a;t[1]!==s.id?(a=Y(s.id),t[1]=s.id,t[2]=a):a=t[2];let _;t[3]===Symbol.for("react.memo_cache_sentinel")?(_={height:"100%",display:"flex",flexDirection:"column",textDecoration:"none",color:"inherit"},t[3]=_):_=t[3];let f;t[4]===Symbol.for("react.memo_cache_sentinel")?(f={flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch"},t[4]=f):f=t[4];const B=s.coverImageUrl||"https://via.placeholder.com/300x200?text=No+Image";let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d={objectFit:"cover"},t[5]=d):d=t[5];let o;t[6]!==s.name||t[7]!==B?(o=i.jsx(xe,{component:"img",height:"200",image:B,alt:s.name,sx:d}),t[6]=s.name,t[7]=B,t[8]=o):o=t[8];let E;t[9]===Symbol.for("react.memo_cache_sentinel")?(E={flexGrow:1},t[9]=E):E=t[9];let b;t[10]!==s.name?(b=i.jsx(G,{variant:"h6",component:"div",noWrap:!0,title:s.name,fontWeight:"bold",children:s.name}),t[10]=s.name,t[11]=b):b=t[11];let k;t[12]!==v||t[13]!==s.owner.id?(k=A=>{A.stopPropagation(),v($(s.owner.id))},t[12]=v,t[13]=s.owner.id,t[14]=k):k=t[14];let p;t[15]===Symbol.for("react.memo_cache_sentinel")?(p={mt:1,mb:2,"&:hover":{textDecoration:"underline"}},t[15]=p):p=t[15];let n;t[16]!==s.owner.id?(n=$(s.owner.id),t[16]=s.owner.id,t[17]=n):n=t[17];const q=(z=s.owner)==null?void 0:z.name,W=(R=s.owner)==null?void 0:R.avatarUrl;let D;t[18]===Symbol.for("react.memo_cache_sentinel")?(D={width:24,height:24,fontSize:"0.8rem"},t[18]=D):D=t[18];let x;t[19]!==n||t[20]!==q||t[21]!==W?(x=i.jsx(oe,{profileLink:n,title:q,avatarUrl:W,sx:D}),t[19]=n,t[20]=q,t[21]=W,t[22]=x):x=t[22];let C;t[23]!==v||t[24]!==s.owner.id?(C=A=>{A.stopPropagation(),v($(s.owner.id))},t[23]=v,t[24]=s.owner.id,t[25]=C):C=t[25];const L=(M=s.owner)==null?void 0:M.name;let I;t[26]!==C||t[27]!==L?(I=i.jsx(G,{variant:"body2",color:"text.secondary",noWrap:!0,onClick:C,children:L}),t[26]=C,t[27]=L,t[28]=I):I=t[28];let u;t[29]!==k||t[30]!==x||t[31]!==I?(u=i.jsxs(N,{direction:"row",alignItems:"center",onClick:k,spacing:1,sx:p,children:[x,I]}),t[29]=k,t[30]=x,t[31]=I,t[32]=u):u=t[32];let S;t[33]!==s.price?(S=s.price.toFixed(2),t[33]=s.price,t[34]=S):S=t[34];let y;t[35]!==S?(y=i.jsxs(G,{variant:"h6",color:"primary.main",fontWeight:"bold",children:["$",S]}),t[35]=S,t[36]=y):y=t[36];let h;t[37]!==s.active?(h=!s.active&&i.jsx(G,{variant:"caption",color:"error",children:"Unavailable"}),t[37]=s.active,t[38]=h):h=t[38];let j;t[39]!==y||t[40]!==h?(j=i.jsxs(N,{direction:"row",justifyContent:"space-between",alignItems:"center",mt:"auto",children:[y,h]}),t[39]=y,t[40]=h,t[41]=j):j=t[41];let m;t[42]!==u||t[43]!==j||t[44]!==b?(m=i.jsxs(ue,{sx:E,children:[b,u,j]}),t[42]=u,t[43]=j,t[44]=b,t[45]=m):m=t[45];let g;t[46]!==m||t[47]!==o?(g=i.jsxs(je,{sx:f,children:[o,m]}),t[46]=m,t[47]=o,t[48]=g):g=t[48];let w;return t[49]!==a||t[50]!==g?(w=i.jsx(ye,{elevation:2,sx:P,children:i.jsx(ne,{to:a,style:_,children:g})}),t[49]=a,t[50]=g,t[51]=w):w=t[51],w},ze=()=>{const e=H.c(60),[t,c]=K(),{t:s}=X(),{showAlert:v}=T.useContext(ee);let P;e[0]!==t?(P=t.get("ownerId")?parseInt(t.get("ownerId")):void 0,e[0]=t,e[1]=P):P=e[1];const a=P;let _;e[2]!==t?(_=t.get("buyerId")?parseInt(t.get("buyerId")):void 0,e[2]=t,e[3]=_):_=e[3];const f=_;let B;e[4]!==t?(B=t.get("page")?parseInt(t.get("page")):1,e[4]=t,e[5]=B):B=e[5];const d=B,[o,E]=T.useState(null),[b,k]=T.useState(!1),p=te(),n=se(ie),q=Q();let W;e[6]!==f||e[7]!==a||e[8]!==d||e[9]!==v||e[10]!==s?(W=()=>{k(!0);const r=ce.create();r.page=d-1,r.pageSize=12;let l;f?l=de(f):a?l=fe(a,r):l=me(r),l.then(F=>{E(F)}).catch(F=>{v(s("Failed to load market data"),"error"),ge(F)}).finally(()=>{k(!1)})},e[6]=f,e[7]=a,e[8]=d,e[9]=v,e[10]=s,e[11]=W):W=e[11];let D;e[12]!==f||e[13]!==a||e[14]!==d?(D=[a,f,d],e[12]=f,e[13]=a,e[14]=d,e[15]=D):D=e[15],T.useEffect(W,D);let x;e[16]!==c?(x=(r,l)=>{c(F=>(F.set("page",l.toString()),F)),window.scrollTo({top:0,behavior:"smooth"})},e[16]=c,e[17]=x):x=e[17];const C=x;let L;e[18]!==c?(L=r=>{c(l=>(l.set("ownerId",r.toString()),l.delete("buyerId"),l.delete("page"),l))},e[18]=c,e[19]=L):L=e[19];const I=L;let u;e[20]!==c?(u=r=>{c(l=>(l.set("buyerId",r.toString()),l.delete("ownerId"),l.delete("page"),l))},e[20]=c,e[21]=u):u=e[21];const S=u;let y;e[22]!==s?(y=s("Digital Market"),e[22]=s,e[23]=y):y=e[23];let h=y;if(a){let r;e[24]!==s?(r=s("Seller's Assets"),e[24]=s,e[25]=r):r=e[25],h=r}if(f){let r;e[26]!==s?(r=s("My Collection"),e[26]=s,e[27]=r):r=e[27],h=r}let j;e[28]===Symbol.for("react.memo_cache_sentinel")?(j={py:4},e[28]=j):j=e[28];let m;e[29]!==h?(m=i.jsx(G,{variant:"h4",fontWeight:"bold",children:h}),e[29]=h,e[30]=m):m=e[30];let g;e[31]!==I||e[32]!==p||e[33]!==n||e[34]!==s?(g=p&&i.jsx(U,{color:"primary",size:"large",title:s("My Assets"),onClick:()=>I(n.userId),children:i.jsx(ve,{})}),e[31]=I,e[32]=p,e[33]=n,e[34]=s,e[35]=g):g=e[35];let w;e[36]!==S||e[37]!==n||e[38]!==s?(w=n&&n.userId&&i.jsx(U,{color:"primary",size:"large",title:s("My Purchase"),onClick:()=>S(n.userId),children:i.jsx(he,{})}),e[36]=S,e[37]=n,e[38]=s,e[39]=w):w=e[39];let z;e[40]!==p||e[41]!==q||e[42]!==s?(z=p&&i.jsx(U,{color:"primary",size:"large",title:s("Create New Asset"),onClick:()=>re("CreateDigitalAssetDialog").then(r=>{r.success&&r.data&&r.data.product&&r.data.product.id&&q(Y(r.data.product.id))}),children:i.jsx(pe,{})}),e[40]=p,e[41]=q,e[42]=s,e[43]=z):z=e[43];let R;e[44]!==g||e[45]!==w||e[46]!==z?(R=i.jsxs(N,{direction:"row",spacing:1,children:[g,w,z]}),e[44]=g,e[45]=w,e[46]=z,e[47]=R):R=e[47];let M;e[48]!==m||e[49]!==R?(M=i.jsxs(V,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[m,R]}),e[48]=m,e[49]=R,e[50]=M):M=e[50];let A;e[51]!==C||e[52]!==b||e[53]!==d||e[54]!==o||e[55]!==s?(A=b?i.jsx(V,{display:"flex",justifyContent:"center",py:10,children:i.jsx(le,{})}):!o||o.assets.length===0?i.jsx(V,{display:"flex",justifyContent:"center",py:10,children:i.jsx(G,{variant:"h6",color:"text.secondary",children:s("No assets found")})}):i.jsxs(i.Fragment,{children:[i.jsx(Z,{container:!0,spacing:3,children:o.assets.map(Ce)}),o.pageResult&&o.pageResult.totalPage>1&&i.jsx(N,{alignItems:"center",sx:{mt:4},children:i.jsx(ae,{count:o.pageResult.totalPage,page:d,onChange:C,color:"primary",size:"large"})})]}),e[51]=C,e[52]=b,e[53]=d,e[54]=o,e[55]=s,e[56]=A):A=e[56];let O;return e[57]!==M||e[58]!==A?(O=i.jsx(we,{maxWidth:"xl",sx:j,children:i.jsxs(N,{spacing:3,children:[M,A]})}),e[57]=M,e[58]=A,e[59]=O):O=e[59],O};function Ce(e,t){var c;return i.jsx(Z,{size:{xs:12,sm:6,md:4,lg:3},children:i.jsx(be,{asset:e})},((c=e.product)==null?void 0:c.id)||t)}export{ze as default};
